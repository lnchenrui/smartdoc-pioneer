2025-03-14 17:33:23,876 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 17:33:23,882 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 17:33:23,882 - di.container - INFO - 初始化服务...
2025-03-14 17:33:23,883 - di.container - INFO - 初始化LLM服务...
2025-03-14 17:42:20,984 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 17:42:20,985 - di.container - INFO - 初始化服务...
2025-03-14 17:42:20,985 - di.container - INFO - 初始化LLM服务...
2025-03-14 17:42:21,166 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 17:42:21,167 - di.container - INFO - 初始化嵌入服务...
2025-03-14 17:42:21,233 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 17:42:21,233 - di.container - INFO - 初始化向量存储服务...
2025-03-14 17:42:21,236 - di.container - WARNING - 向量存储服务初始化失败: Could not import chromadb python package. Please install it with `pip install chromadb`.，使用内存向量存储
2025-03-14 21:17:48,472 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:17:48,473 - di.container - INFO - 初始化服务...
2025-03-14 21:17:48,473 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:17:48,572 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:17:48,573 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:17:48,630 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:17:48,631 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:17:48,633 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:17:48,636 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:20:09,397 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:20:09,397 - di.container - INFO - 初始化服务...
2025-03-14 21:20:09,398 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:20:09,501 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:20:09,501 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:20:09,567 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:20:09,568 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:20:09,570 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:20:09,573 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:20:09,574 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:20:09,574 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:20:09,601 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:20:09,602 - di.container - INFO - 初始化提示服务...
2025-03-14 21:20:09,602 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:20:09,602 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:20:09,603 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:20:09,603 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:20:09,603 - di.container - INFO - 初始化索引服务...
2025-03-14 21:20:09,604 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:20:09,604 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:20:59,760 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:20:59,760 - di.container - INFO - 初始化服务...
2025-03-14 21:20:59,760 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:20:59,854 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:20:59,855 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:20:59,914 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:20:59,914 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:20:59,916 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:20:59,919 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:20:59,919 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:20:59,919 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:20:59,942 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:20:59,943 - di.container - INFO - 初始化提示服务...
2025-03-14 21:20:59,943 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:20:59,943 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:20:59,943 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:20:59,943 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:20:59,943 - di.container - INFO - 初始化索引服务...
2025-03-14 21:20:59,943 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:20:59,943 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:22:28,071 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:22:28,072 - di.container - INFO - 初始化服务...
2025-03-14 21:22:28,072 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:22:28,170 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:22:28,170 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:22:28,225 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:22:28,226 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:22:28,229 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:22:28,231 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:22:28,232 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:22:28,232 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:22:28,262 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:22:28,262 - di.container - INFO - 初始化提示服务...
2025-03-14 21:22:28,262 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:22:28,263 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:22:28,263 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:22:28,263 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:22:28,263 - di.container - INFO - 初始化索引服务...
2025-03-14 21:22:28,264 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:22:28,264 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:22:28,265 - services.prompt - ERROR - 创建聊天提示模板失败: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 185, in create_chat_prompt_template
    messages.append(HumanMessage(content=human_message_prompt))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\messages\human.py", line 57, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\messages\base.py", line 77, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
2025-03-14 21:22:28,276 - services.prompt - ERROR - 创建RAG提示模板失败: 创建聊天提示模板失败: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 185, in create_chat_prompt_template
    messages.append(HumanMessage(content=human_message_prompt))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\messages\human.py", line 57, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\messages\base.py", line 77, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 239, in create_rag_prompt_template
    return self.create_chat_prompt_template(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 199, in create_chat_prompt_template
    raise ServiceError(error_msg)
app.utils.error_handler.ServiceError: 创建聊天提示模板失败: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
2025-03-14 21:22:28,292 - services.prompt - ERROR - 创建RAG提示失败: 创建RAG提示模板失败: 创建聊天提示模板失败: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 185, in create_chat_prompt_template
    messages.append(HumanMessage(content=human_message_prompt))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\messages\human.py", line 57, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\messages\base.py", line 77, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 239, in create_rag_prompt_template
    return self.create_chat_prompt_template(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 199, in create_chat_prompt_template
    raise ServiceError(error_msg)
app.utils.error_handler.ServiceError: 创建聊天提示模板失败: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 270, in create_rag_prompt
    return self.create_rag_prompt_template(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\prompt_service.py", line 249, in create_rag_prompt_template
    raise ServiceError(error_msg)
app.utils.error_handler.ServiceError: 创建RAG提示模板失败: 创建聊天提示模板失败: 23 validation errors for HumanMessage
content.str
  Input should be a valid string [type=string_type, input_value=PromptTemplate(input_vari...ion}\n                '), input_type=PromptTemplate]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.str
  Input should be a valid string [type=string_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].0.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('name', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].1.str
  Input should be a valid string [type=string_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].1.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_variables', ['context', 'question']), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].2.str
  Input should be a valid string [type=string_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].2.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('optional_variables', []), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].3.str
  Input should be a valid string [type=string_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].3.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('input_types', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].4.str
  Input should be a valid string [type=string_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].4.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('output_parser', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].5.str
  Input should be a valid string [type=string_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].5.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('partial_variables', {}), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].6.str
  Input should be a valid string [type=string_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].6.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('metadata', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].7.str
  Input should be a valid string [type=string_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].7.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('tags', None), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].8.str
  Input should be a valid string [type=string_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].8.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template', '\n         ...ion}\n                '), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].9.str
  Input should be a valid string [type=string_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].9.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('template_format', 'f-string'), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
content.list[union[str,dict[any,any]]].10.str
  Input should be a valid string [type=string_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
content.list[union[str,dict[any,any]]].10.dict[any,any]
  Input should be a valid dictionary [type=dict_type, input_value=('validate_template', False), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.10/v/dict_type
2025-03-14 21:23:41,910 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:23:41,911 - di.container - INFO - 初始化服务...
2025-03-14 21:23:41,911 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:23:42,010 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:23:42,011 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:23:42,065 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:23:42,066 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:23:42,069 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:23:42,072 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:23:42,073 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:23:42,073 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:23:42,098 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:23:42,098 - di.container - INFO - 初始化提示服务...
2025-03-14 21:23:42,098 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:23:42,099 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:23:42,099 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:23:42,099 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:23:42,099 - di.container - INFO - 初始化索引服务...
2025-03-14 21:23:42,099 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:23:42,100 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:23:42,100 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:23:42,101 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:23:42,101 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:23:42,101 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:23:42,101 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:23:42,101 - di.container - INFO - 服务初始化完成
2025-03-14 21:23:42,101 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:23:42,102 - app.factory - INFO - 服务初始化完成
2025-03-14 21:25:22,291 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:25:22,292 - di.container - INFO - 初始化服务...
2025-03-14 21:25:22,292 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:25:22,395 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:25:22,395 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:25:22,463 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:25:22,463 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:25:22,465 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:25:22,470 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:25:22,470 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:25:22,470 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:25:22,496 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:25:22,497 - di.container - INFO - 初始化提示服务...
2025-03-14 21:25:22,497 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:25:22,497 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:25:22,497 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:25:22,497 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:25:22,497 - di.container - INFO - 初始化索引服务...
2025-03-14 21:25:22,498 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:25:22,498 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:25:22,500 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:25:22,500 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:25:22,500 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:25:22,500 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:25:22,500 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:25:22,501 - di.container - INFO - 服务初始化完成
2025-03-14 21:25:22,501 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:25:22,501 - app.factory - INFO - 服务初始化完成
2025-03-14 21:25:22,513 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:25:22,514 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:25:22,514 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:25:22,514 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:25:22,549 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:25:22,549 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:25:22,549 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:25:52,661 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:25:52,661 - di.container - INFO - 初始化服务...
2025-03-14 21:25:52,662 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:25:52,839 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:25:52,839 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:25:52,957 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:25:52,958 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:25:52,965 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:25:52,973 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:25:52,974 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:25:52,975 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:25:53,041 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:25:53,041 - di.container - INFO - 初始化提示服务...
2025-03-14 21:25:53,042 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:25:53,042 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:25:53,043 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:25:53,043 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:25:53,044 - di.container - INFO - 初始化索引服务...
2025-03-14 21:25:53,045 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:25:53,045 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:25:53,047 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:25:53,048 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:25:53,048 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:25:53,049 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:25:53,049 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:25:53,049 - di.container - INFO - 服务初始化完成
2025-03-14 21:25:53,050 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:25:53,050 - app.factory - INFO - 服务初始化完成
2025-03-14 21:25:53,062 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:25:53,063 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:25:53,063 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:25:53,064 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:25:53,115 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:25:53,116 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:25:53,118 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:25:57,971 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:25:57,971 - di.container - INFO - 初始化服务...
2025-03-14 21:25:57,972 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:25:58,158 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:25:58,159 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:25:58,250 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:25:58,251 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:25:58,254 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:25:58,260 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:25:58,260 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:25:58,261 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:25:58,299 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:25:58,300 - di.container - INFO - 初始化提示服务...
2025-03-14 21:25:58,300 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:25:58,300 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:25:58,300 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:25:58,301 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:25:58,301 - di.container - INFO - 初始化索引服务...
2025-03-14 21:25:58,301 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:25:58,302 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:25:58,303 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:25:58,303 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:25:58,303 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:25:58,303 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:25:58,303 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:25:58,304 - di.container - INFO - 服务初始化完成
2025-03-14 21:25:58,304 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:25:58,304 - app.factory - INFO - 服务初始化完成
2025-03-14 21:25:58,310 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:25:58,311 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:25:58,311 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:25:58,312 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:25:58,337 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:25:58,345 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:26:10,016 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:26:10,017 - di.container - INFO - 初始化服务...
2025-03-14 21:26:10,017 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:26:10,161 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:26:10,161 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:26:10,244 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:26:10,245 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:26:10,247 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:26:10,254 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:26:10,255 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:26:10,255 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:26:10,298 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:26:10,299 - di.container - INFO - 初始化提示服务...
2025-03-14 21:26:10,300 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:26:10,300 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:26:10,300 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:26:10,301 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:26:10,301 - di.container - INFO - 初始化索引服务...
2025-03-14 21:26:10,302 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:26:10,302 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:26:10,303 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:26:10,304 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:26:10,304 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:26:10,304 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:26:10,305 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:26:10,305 - di.container - INFO - 服务初始化完成
2025-03-14 21:26:10,305 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:26:10,306 - app.factory - INFO - 服务初始化完成
2025-03-14 21:26:10,314 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:26:10,315 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:26:10,315 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:26:10,315 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:26:10,348 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:26:10,348 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:26:10,357 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:26:18,030 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:26:18,031 - di.container - INFO - 初始化服务...
2025-03-14 21:26:18,031 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:26:18,187 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:26:18,188 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:26:18,318 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:26:18,319 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:26:18,323 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:26:18,332 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:26:18,333 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:26:18,333 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:26:18,370 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:26:18,370 - di.container - INFO - 初始化提示服务...
2025-03-14 21:26:18,371 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:26:18,371 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:26:18,372 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:26:18,372 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:26:18,372 - di.container - INFO - 初始化索引服务...
2025-03-14 21:26:18,373 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:26:18,373 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:26:18,376 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:26:18,377 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:26:18,377 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:26:18,378 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:26:18,378 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:26:18,378 - di.container - INFO - 服务初始化完成
2025-03-14 21:26:18,378 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:26:18,378 - app.factory - INFO - 服务初始化完成
2025-03-14 21:26:18,391 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:26:18,392 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:26:18,392 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:26:18,393 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:26:18,421 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:26:18,430 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:26:30,566 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:26:30,567 - di.container - INFO - 初始化服务...
2025-03-14 21:26:30,567 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:26:30,738 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:26:30,739 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:26:30,819 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:26:30,820 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:26:30,824 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:26:30,831 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:26:30,832 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:26:30,833 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:26:30,877 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:26:30,878 - di.container - INFO - 初始化提示服务...
2025-03-14 21:26:30,878 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:26:30,879 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:26:30,879 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:26:30,879 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:26:30,880 - di.container - INFO - 初始化索引服务...
2025-03-14 21:26:30,880 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:26:30,881 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:26:30,882 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:26:30,882 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:26:30,882 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:26:30,882 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:26:30,883 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:26:30,883 - di.container - INFO - 服务初始化完成
2025-03-14 21:26:30,883 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:26:30,884 - app.factory - INFO - 服务初始化完成
2025-03-14 21:26:30,892 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:26:30,892 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:26:30,893 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:26:30,893 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:26:30,917 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:26:30,924 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:29:27,264 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:29:27,264 - di.container - INFO - 初始化服务...
2025-03-14 21:29:27,264 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:29:27,355 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:29:27,356 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:29:27,411 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:29:27,412 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:29:27,414 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:29:27,417 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:29:27,417 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:29:27,418 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:29:27,443 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:29:27,444 - di.container - INFO - 初始化提示服务...
2025-03-14 21:29:27,444 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:29:27,445 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:29:27,445 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:29:27,445 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:29:27,446 - di.container - INFO - 初始化索引服务...
2025-03-14 21:29:27,446 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:29:27,446 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:29:27,447 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:29:27,447 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:29:27,447 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:29:27,448 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:29:27,448 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:29:27,448 - di.container - INFO - 服务初始化完成
2025-03-14 21:29:27,448 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:29:27,448 - app.factory - INFO - 服务初始化完成
2025-03-14 21:29:27,453 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:29:27,454 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:29:27,454 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:29:27,454 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:29:27,481 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:29:27,481 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:29:27,483 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:29:34,150 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:29:34,151 - di.container - INFO - 初始化服务...
2025-03-14 21:29:34,152 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:29:34,254 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:29:34,254 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:29:34,314 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:29:34,314 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:29:34,316 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:29:34,319 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:29:34,320 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:29:34,320 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:29:34,348 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:29:34,348 - di.container - INFO - 初始化提示服务...
2025-03-14 21:29:34,350 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:29:34,350 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:29:34,350 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:29:34,350 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:29:34,351 - di.container - INFO - 初始化索引服务...
2025-03-14 21:29:34,351 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:29:34,351 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:29:34,353 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:29:34,353 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:29:34,354 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:29:34,354 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:29:34,354 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:29:34,354 - di.container - INFO - 服务初始化完成
2025-03-14 21:29:34,354 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:29:34,355 - app.factory - INFO - 服务初始化完成
2025-03-14 21:29:34,360 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:29:34,361 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:29:34,361 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:29:34,361 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:29:34,376 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:29:34,381 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:29:40,860 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:29:40,860 - di.container - INFO - 初始化服务...
2025-03-14 21:29:40,860 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:29:40,963 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:29:40,963 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:29:41,031 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:29:41,032 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:29:41,034 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:29:41,037 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:29:41,037 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:29:41,038 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:29:41,059 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:29:41,059 - di.container - INFO - 初始化提示服务...
2025-03-14 21:29:41,060 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:29:41,060 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:29:41,060 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:29:41,060 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:29:41,060 - di.container - INFO - 初始化索引服务...
2025-03-14 21:29:41,061 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:29:41,061 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:29:41,062 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:29:41,062 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:29:41,062 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:29:41,062 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:29:41,063 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:29:41,063 - di.container - INFO - 服务初始化完成
2025-03-14 21:29:41,063 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:29:41,063 - app.factory - INFO - 服务初始化完成
2025-03-14 21:29:41,068 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:29:41,069 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:29:41,069 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:29:41,069 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:29:41,093 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:29:41,093 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:29:41,095 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:30:23,300 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:30:23,301 - di.container - INFO - 初始化服务...
2025-03-14 21:30:23,301 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:30:23,404 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:30:23,405 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:30:23,463 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:30:23,463 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:30:23,465 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:30:23,469 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:30:23,470 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:30:23,470 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:30:23,497 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:30:23,497 - di.container - INFO - 初始化提示服务...
2025-03-14 21:30:23,498 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:30:23,498 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:30:23,498 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:30:23,498 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:30:23,498 - di.container - INFO - 初始化索引服务...
2025-03-14 21:30:23,499 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:30:23,499 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:30:23,500 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:30:23,500 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:30:23,500 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:30:23,501 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:30:23,501 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:30:23,501 - di.container - INFO - 服务初始化完成
2025-03-14 21:30:23,501 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:30:23,501 - app.factory - INFO - 服务初始化完成
2025-03-14 21:30:23,506 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:30:23,506 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:30:23,507 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:30:23,507 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:30:23,531 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:30:23,531 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:30:23,533 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:30:30,301 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:30:30,302 - di.container - INFO - 初始化服务...
2025-03-14 21:30:30,302 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:30:30,405 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:30:30,406 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:30:30,476 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:30:30,476 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:30:30,476 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:30:30,476 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:30:30,476 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:30:30,476 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:30:30,516 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:30:30,516 - di.container - INFO - 初始化提示服务...
2025-03-14 21:30:30,516 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:30:30,517 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:30:30,517 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:30:30,517 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:30:30,518 - di.container - INFO - 初始化索引服务...
2025-03-14 21:30:30,518 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:30:30,518 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:30:30,519 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:30:30,519 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:30:30,520 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:30:30,520 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:30:30,521 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:30:30,521 - di.container - INFO - 服务初始化完成
2025-03-14 21:30:30,521 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:30:30,521 - app.factory - INFO - 服务初始化完成
2025-03-14 21:30:30,527 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:30:30,528 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:30:30,528 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:30:30,529 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:30:30,546 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:30:30,552 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:30:30,576 - api.chat - ERROR - 聊天完成API错误: ChatService.chat() takes 2 positional arguments but 4 were given
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\api\chat.py", line 57, in chat_completions
    response = chat_service.chat(messages, temperature, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatService.chat() takes 2 positional arguments but 4 were given
2025-03-14 21:30:30,594 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 21:30:30] "[35m[1mPOST /api/chat/completions HTTP/1.1[0m" 500 -
2025-03-14 21:31:13,293 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\chat_service.py', reloading
2025-03-14 21:31:13,721 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:31:20,646 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:31:20,646 - di.container - INFO - 初始化服务...
2025-03-14 21:31:20,647 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:31:20,764 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:31:20,764 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:31:20,834 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:31:20,835 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:31:20,836 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:31:20,840 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:31:20,841 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:31:20,841 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:31:20,866 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:31:20,866 - di.container - INFO - 初始化提示服务...
2025-03-14 21:31:20,867 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:31:20,867 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:31:20,867 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:31:20,867 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:31:20,867 - di.container - INFO - 初始化索引服务...
2025-03-14 21:31:20,868 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:31:20,868 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:31:20,869 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:31:20,870 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:31:20,870 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:31:20,870 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:31:20,870 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:31:20,870 - di.container - INFO - 服务初始化完成
2025-03-14 21:31:20,870 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:31:20,870 - app.factory - INFO - 服务初始化完成
2025-03-14 21:31:20,876 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:31:20,876 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:31:20,876 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:31:20,876 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:31:20,892 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:31:20,899 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:31:28,095 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\chat_service.py', reloading
2025-03-14 21:31:28,587 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:31:35,597 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:31:35,598 - di.container - INFO - 初始化服务...
2025-03-14 21:31:35,598 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:31:35,679 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:31:35,692 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:31:35,750 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:31:35,750 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:31:35,750 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:31:35,756 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:31:35,756 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:31:35,756 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:31:35,782 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:31:35,783 - di.container - INFO - 初始化提示服务...
2025-03-14 21:31:35,784 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:31:35,784 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:31:35,784 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:31:35,785 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:31:35,785 - di.container - INFO - 初始化索引服务...
2025-03-14 21:31:35,786 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:31:35,786 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:31:35,788 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:31:35,788 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:31:35,788 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:31:35,788 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:31:35,789 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:31:35,789 - di.container - INFO - 服务初始化完成
2025-03-14 21:31:35,790 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:31:35,790 - app.factory - INFO - 服务初始化完成
2025-03-14 21:31:35,797 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:31:35,798 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:31:35,798 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:31:35,798 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:31:35,812 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:31:35,816 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:31:41,832 - services.chat - ERROR - 生成聊天回复失败: 'DocumentLoaderService' object has no attribute 'read_all_documents'
2025-03-14 21:31:41,833 - api.chat - ERROR - 聊天完成API错误: 聊天服务错误: 'DocumentLoaderService' object has no attribute 'read_all_documents'
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 157, in chat
    processed_messages = self.process_local_chat_messages(messages)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 103, in process_local_chat_messages
    context = self.document_loader.read_all_documents()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DocumentLoaderService' object has no attribute 'read_all_documents'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\api\chat.py", line 57, in chat_completions
    response = chat_service.chat(messages, temperature, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 171, in chat
    raise ServiceError(f"聊天服务错误: {str(e)}")
app.utils.error_handler.ServiceError: 聊天服务错误: 'DocumentLoaderService' object has no attribute 'read_all_documents'
2025-03-14 21:31:41,836 - app.utils.error_handler - ERROR - API错误: 聊天服务错误: 'DocumentLoaderService' object has no attribute 'read_all_documents'
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 157, in chat
    processed_messages = self.process_local_chat_messages(messages)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 103, in process_local_chat_messages
    context = self.document_loader.read_all_documents()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DocumentLoaderService' object has no attribute 'read_all_documents'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\flask\app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\flask\app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\api\chat.py", line 57, in chat_completions
    response = chat_service.chat(messages, temperature, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 171, in chat
    raise ServiceError(f"聊天服务错误: {str(e)}")
app.utils.error_handler.ServiceError: 聊天服务错误: 'DocumentLoaderService' object has no attribute 'read_all_documents'
2025-03-14 21:31:41,840 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 21:31:41] "[35m[1mPOST /api/chat/completions HTTP/1.1[0m" 500 -
2025-03-14 21:31:55,169 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:31:55,170 - di.container - INFO - 初始化服务...
2025-03-14 21:31:55,170 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:31:55,304 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:31:55,305 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:31:55,386 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:31:55,391 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:31:55,395 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:31:55,400 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:31:55,400 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:31:55,401 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:31:55,436 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:31:55,436 - di.container - INFO - 初始化提示服务...
2025-03-14 21:31:55,436 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:31:55,436 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:31:55,436 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:31:55,436 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:31:55,436 - di.container - INFO - 初始化索引服务...
2025-03-14 21:31:55,436 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:31:55,436 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:31:55,436 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:31:55,436 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:31:55,436 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:31:55,442 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:31:55,443 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:31:55,443 - di.container - INFO - 服务初始化完成
2025-03-14 21:31:55,443 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:31:55,443 - app.factory - INFO - 服务初始化完成
2025-03-14 21:31:55,448 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:31:55,449 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:31:55,449 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:31:55,449 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:31:55,481 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:31:55,482 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:31:55,485 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:32:03,032 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:32:03,032 - di.container - INFO - 初始化服务...
2025-03-14 21:32:03,033 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:32:03,145 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:32:03,146 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:32:03,199 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:32:03,199 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:32:03,201 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:32:03,204 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:32:03,204 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:32:03,204 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:32:03,227 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:32:03,227 - di.container - INFO - 初始化提示服务...
2025-03-14 21:32:03,228 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:32:03,228 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:32:03,228 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:32:03,228 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:32:03,228 - di.container - INFO - 初始化索引服务...
2025-03-14 21:32:03,228 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:32:03,228 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:32:03,228 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:32:03,228 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:32:03,228 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:32:03,228 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:32:03,228 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:32:03,228 - di.container - INFO - 服务初始化完成
2025-03-14 21:32:03,228 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:32:03,228 - app.factory - INFO - 服务初始化完成
2025-03-14 21:32:03,228 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:32:03,228 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:32:03,228 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:32:03,228 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:32:03,259 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:32:03,266 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:32:26,698 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\chat_service.py', reloading
2025-03-14 21:32:27,089 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:32:33,792 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:32:33,793 - di.container - INFO - 初始化服务...
2025-03-14 21:32:33,793 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:32:33,897 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:32:33,898 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:32:33,960 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:32:33,960 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:32:33,963 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:32:33,966 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:32:33,967 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:32:33,967 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:32:33,977 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:32:33,977 - di.container - INFO - 初始化提示服务...
2025-03-14 21:32:33,977 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:32:33,977 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:32:33,977 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:32:33,977 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:32:33,977 - di.container - INFO - 初始化索引服务...
2025-03-14 21:32:33,977 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:32:33,977 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:32:33,977 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:32:33,977 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:32:33,977 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:32:33,977 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:32:33,977 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:32:33,977 - di.container - INFO - 服务初始化完成
2025-03-14 21:32:33,977 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:32:33,992 - app.factory - INFO - 服务初始化完成
2025-03-14 21:32:33,997 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:32:33,997 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:32:33,997 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:32:33,997 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:32:34,014 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:32:34,019 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:32:41,366 - services.chat - ERROR - 生成聊天回复失败: 'LLMService' object has no attribute 'generate_chat_response'
2025-03-14 21:32:41,366 - api.chat - ERROR - 聊天完成API错误: 聊天服务错误: 'LLMService' object has no attribute 'generate_chat_response'
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 160, in chat
    response = self.llm_service.generate_chat_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LLMService' object has no attribute 'generate_chat_response'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\api\chat.py", line 57, in chat_completions
    response = chat_service.chat(messages, temperature, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 171, in chat
    raise ServiceError(f"聊天服务错误: {str(e)}")
app.utils.error_handler.ServiceError: 聊天服务错误: 'LLMService' object has no attribute 'generate_chat_response'
2025-03-14 21:32:41,369 - app.utils.error_handler - ERROR - API错误: 聊天服务错误: 'LLMService' object has no attribute 'generate_chat_response'
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 160, in chat
    response = self.llm_service.generate_chat_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'LLMService' object has no attribute 'generate_chat_response'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\flask\app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\flask\app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\api\chat.py", line 57, in chat_completions
    response = chat_service.chat(messages, temperature, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 171, in chat
    raise ServiceError(f"聊天服务错误: {str(e)}")
app.utils.error_handler.ServiceError: 聊天服务错误: 'LLMService' object has no attribute 'generate_chat_response'
2025-03-14 21:32:41,374 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 21:32:41] "[35m[1mPOST /api/chat/completions HTTP/1.1[0m" 500 -
2025-03-14 21:32:43,146 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:32:43,146 - di.container - INFO - 初始化服务...
2025-03-14 21:32:43,146 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:32:43,241 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:32:43,242 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:32:43,299 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:32:43,299 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:32:43,302 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:32:43,305 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:32:43,305 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:32:43,305 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:32:43,333 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:32:43,334 - di.container - INFO - 初始化提示服务...
2025-03-14 21:32:43,335 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:32:43,335 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:32:43,335 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:32:43,336 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:32:43,336 - di.container - INFO - 初始化索引服务...
2025-03-14 21:32:43,337 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:32:43,337 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:32:43,338 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:32:43,339 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:32:43,339 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:32:43,340 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:32:43,340 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:32:43,340 - di.container - INFO - 服务初始化完成
2025-03-14 21:32:43,340 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:32:43,340 - app.factory - INFO - 服务初始化完成
2025-03-14 21:32:43,345 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:32:43,345 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:32:43,346 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:32:43,346 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:32:43,371 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:32:43,372 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:32:43,374 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:32:50,262 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:32:50,262 - di.container - INFO - 初始化服务...
2025-03-14 21:32:50,264 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:32:50,364 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:32:50,364 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:32:50,421 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:32:50,422 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:32:50,424 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:32:50,429 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:32:50,429 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:32:50,429 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:32:50,449 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:32:50,449 - di.container - INFO - 初始化提示服务...
2025-03-14 21:32:50,450 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:32:50,450 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:32:50,450 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:32:50,450 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:32:50,450 - di.container - INFO - 初始化索引服务...
2025-03-14 21:32:50,451 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:32:50,451 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:32:50,452 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:32:50,453 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:32:50,453 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:32:50,453 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:32:50,453 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:32:50,453 - di.container - INFO - 服务初始化完成
2025-03-14 21:32:50,453 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:32:50,454 - app.factory - INFO - 服务初始化完成
2025-03-14 21:32:50,459 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:32:50,459 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:32:50,459 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:32:50,459 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:32:50,473 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:32:50,477 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:33:09,836 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\chat_service.py', reloading
2025-03-14 21:33:10,217 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:33:10,761 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\chat_service.py', reloading
2025-03-14 21:33:11,251 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:33:17,320 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:33:17,320 - di.container - INFO - 初始化服务...
2025-03-14 21:33:17,321 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:33:17,437 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:33:17,438 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:33:17,493 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:33:17,493 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:33:17,493 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:33:17,493 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:33:17,493 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:33:17,493 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:33:17,526 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:33:17,527 - di.container - INFO - 初始化提示服务...
2025-03-14 21:33:17,527 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:33:17,528 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:33:17,528 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:33:17,529 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:33:17,529 - di.container - INFO - 初始化索引服务...
2025-03-14 21:33:17,529 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:33:17,530 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:33:17,531 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:33:17,532 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:33:17,532 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:33:17,532 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:33:17,532 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:33:17,533 - di.container - INFO - 服务初始化完成
2025-03-14 21:33:17,533 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:33:17,533 - app.factory - INFO - 服务初始化完成
2025-03-14 21:33:17,541 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:33:17,541 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:33:17,541 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:33:17,541 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:33:17,564 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:33:17,569 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:33:18,458 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:33:18,458 - di.container - INFO - 初始化服务...
2025-03-14 21:33:18,459 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:33:18,610 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:33:18,610 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:33:18,699 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:33:18,700 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:33:18,703 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:33:18,707 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:33:18,707 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:33:18,707 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:33:18,739 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:33:18,740 - di.container - INFO - 初始化提示服务...
2025-03-14 21:33:18,740 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:33:18,740 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:33:18,741 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:33:18,741 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:33:18,741 - di.container - INFO - 初始化索引服务...
2025-03-14 21:33:18,742 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:33:18,742 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:33:18,743 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:33:18,744 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:33:18,744 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:33:18,744 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:33:18,745 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:33:18,745 - di.container - INFO - 服务初始化完成
2025-03-14 21:33:18,745 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:33:18,745 - app.factory - INFO - 服务初始化完成
2025-03-14 21:33:18,754 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:33:18,755 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:33:18,755 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:33:18,755 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:33:18,774 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:33:18,783 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:33:31,062 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\chat_service.py', reloading
2025-03-14 21:33:31,515 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:33:31,888 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\chat_service.py', reloading
2025-03-14 21:33:32,390 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:33:38,695 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:33:38,695 - di.container - INFO - 初始化服务...
2025-03-14 21:33:38,695 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:33:38,835 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:33:38,835 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:33:38,912 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:33:38,912 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:33:38,912 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:33:38,912 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:33:38,912 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:33:38,912 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:33:38,950 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:33:38,950 - di.container - INFO - 初始化提示服务...
2025-03-14 21:33:38,951 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:33:38,951 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:33:38,951 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:33:38,952 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:33:38,952 - di.container - INFO - 初始化索引服务...
2025-03-14 21:33:38,952 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:33:38,953 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:33:38,954 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:33:38,954 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:33:38,954 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:33:38,954 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:33:38,955 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:33:38,955 - di.container - INFO - 服务初始化完成
2025-03-14 21:33:38,955 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:33:38,955 - app.factory - INFO - 服务初始化完成
2025-03-14 21:33:38,961 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:33:38,961 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:33:38,962 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:33:38,962 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:33:38,977 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:33:38,981 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:33:39,504 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:33:39,505 - di.container - INFO - 初始化服务...
2025-03-14 21:33:39,505 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:33:39,627 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:33:39,628 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:33:39,695 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:33:39,695 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:33:39,697 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:33:39,702 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:33:39,703 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:33:39,703 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:33:39,736 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:33:39,737 - di.container - INFO - 初始化提示服务...
2025-03-14 21:33:39,737 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:33:39,738 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:33:39,738 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:33:39,738 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:33:39,739 - di.container - INFO - 初始化索引服务...
2025-03-14 21:33:39,739 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:33:39,740 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:33:39,740 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:33:39,742 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:33:39,742 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:33:39,742 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:33:39,743 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:33:39,743 - di.container - INFO - 服务初始化完成
2025-03-14 21:33:39,743 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:33:39,744 - app.factory - INFO - 服务初始化完成
2025-03-14 21:33:39,750 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:33:39,750 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:33:39,751 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:33:39,751 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:33:39,770 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:33:39,776 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:33:44,464 - services.llm - INFO - 聊天生成: 2 条消息, temperature=0.7, max_tokens=1024
2025-03-14 21:33:46,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 401 Unauthorized"
2025-03-14 21:33:46,801 - services.llm - ERROR - 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\llm_service.py", line 231, in chat
    response = self.llm.invoke(messages, **params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_openai\chat_models\base.py", line 804, in _generate
    return generate_from_stream(stream_iter)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 91, in generate_from_stream
    generation = next(stream, None)
                 ^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_openai\chat_models\base.py", line 755, in _stream
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\resources\chat\completions\completions.py", line 914, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 919, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 1023, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-03-14 21:33:46,813 - services.chat - ERROR - 生成聊天回复失败: 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-03-14 21:33:46,813 - api.chat - ERROR - 聊天完成API错误: 聊天服务错误: 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\llm_service.py", line 231, in chat
    response = self.llm.invoke(messages, **params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_openai\chat_models\base.py", line 804, in _generate
    return generate_from_stream(stream_iter)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 91, in generate_from_stream
    generation = next(stream, None)
                 ^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_openai\chat_models\base.py", line 755, in _stream
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\resources\chat\completions\completions.py", line 914, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 919, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 1023, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 173, in chat
    ai_message = self.llm_service.chat(
                 ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\llm_service.py", line 249, in chat
    raise ServiceError(error_msg)
app.utils.error_handler.ServiceError: 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\api\chat.py", line 57, in chat_completions
    response = chat_service.chat(messages, temperature, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 196, in chat
    raise ServiceError(f"聊天服务错误: {str(e)}")
app.utils.error_handler.ServiceError: 聊天服务错误: 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-03-14 21:33:46,820 - app.utils.error_handler - ERROR - API错误: 聊天服务错误: 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\llm_service.py", line 231, in chat
    response = self.llm.invoke(messages, **params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_openai\chat_models\base.py", line 804, in _generate
    return generate_from_stream(stream_iter)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_core\language_models\chat_models.py", line 91, in generate_from_stream
    generation = next(stream, None)
                 ^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\langchain_openai\chat_models\base.py", line 755, in _stream
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\resources\chat\completions\completions.py", line 914, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 919, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\openai\_base_client.py", line 1023, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 173, in chat
    ai_message = self.llm_service.chat(
                 ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\llm_service.py", line 249, in chat
    raise ServiceError(error_msg)
app.utils.error_handler.ServiceError: 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\flask\app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\tool\miniforge\envs\smartdoc\Lib\site-packages\flask\app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\api\chat.py", line 57, in chat_completions
    response = chat_service.chat(messages, temperature, max_tokens)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\workspace\project\smartdoc-pioneer\app\services\chat_service.py", line 196, in chat
    raise ServiceError(f"聊天服务错误: {str(e)}")
app.utils.error_handler.ServiceError: 聊天服务错误: 聊天生成失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-03-14 21:33:46,827 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 21:33:46] "[35m[1mPOST /api/chat/completions HTTP/1.1[0m" 500 -
2025-03-14 21:33:48,621 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:33:48,621 - di.container - INFO - 初始化服务...
2025-03-14 21:33:48,622 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:33:48,759 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:33:48,760 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:33:48,828 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:33:48,829 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:33:48,831 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:33:48,837 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:33:48,837 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:33:48,837 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:33:48,859 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:33:48,859 - di.container - INFO - 初始化提示服务...
2025-03-14 21:33:48,859 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:33:48,860 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:33:48,860 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:33:48,860 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:33:48,860 - di.container - INFO - 初始化索引服务...
2025-03-14 21:33:48,861 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:33:48,861 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:33:48,862 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:33:48,862 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:33:48,862 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:33:48,862 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:33:48,863 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:33:48,863 - di.container - INFO - 服务初始化完成
2025-03-14 21:33:48,863 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:33:48,863 - app.factory - INFO - 服务初始化完成
2025-03-14 21:33:48,869 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:33:48,870 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:33:48,870 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:33:48,870 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:33:48,900 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:33:48,901 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:33:48,903 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:33:55,928 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:33:55,928 - di.container - INFO - 初始化服务...
2025-03-14 21:33:55,928 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:33:56,038 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:33:56,038 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:33:56,102 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:33:56,102 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:33:56,104 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:33:56,109 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:33:56,110 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:33:56,111 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:33:56,139 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:33:56,140 - di.container - INFO - 初始化提示服务...
2025-03-14 21:33:56,140 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:33:56,141 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:33:56,141 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:33:56,141 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:33:56,141 - di.container - INFO - 初始化索引服务...
2025-03-14 21:33:56,142 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:33:56,142 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:33:56,144 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:33:56,144 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:33:56,145 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:33:56,145 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:33:56,146 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:33:56,146 - di.container - INFO - 服务初始化完成
2025-03-14 21:33:56,146 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:33:56,147 - app.factory - INFO - 服务初始化完成
2025-03-14 21:33:56,155 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:33:56,156 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:33:56,156 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:33:56,156 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:33:56,174 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:33:56,181 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:34:09,466 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:34:09,525 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:34:09,629 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:34:10,007 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:34:10,059 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:34:10,084 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:34:17,834 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:34:17,835 - di.container - INFO - 初始化服务...
2025-03-14 21:34:17,835 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:34:17,917 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:34:17,917 - di.container - INFO - 初始化服务...
2025-03-14 21:34:17,917 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:34:17,941 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:34:17,941 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:34:18,017 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:34:18,018 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:34:18,021 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:34:18,025 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:34:18,026 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:34:18,027 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:34:18,046 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:34:18,047 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:34:18,048 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:34:18,048 - di.container - INFO - 初始化服务...
2025-03-14 21:34:18,049 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:34:18,055 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:34:18,055 - di.container - INFO - 初始化提示服务...
2025-03-14 21:34:18,056 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:34:18,056 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:34:18,057 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:34:18,057 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:34:18,057 - di.container - INFO - 初始化索引服务...
2025-03-14 21:34:18,058 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:34:18,058 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:34:18,060 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:34:18,060 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:34:18,060 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:34:18,060 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:34:18,061 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:34:18,061 - di.container - INFO - 服务初始化完成
2025-03-14 21:34:18,062 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:34:18,062 - app.factory - INFO - 服务初始化完成
2025-03-14 21:34:18,068 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:34:18,068 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:34:18,068 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:34:18,068 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:34:18,085 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:34:18,092 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:34:18,116 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:34:18,117 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:34:18,118 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:34:18,124 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:34:18,124 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:34:18,124 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:34:18,162 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:34:18,162 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:34:18,163 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:34:18,163 - di.container - INFO - 初始化提示服务...
2025-03-14 21:34:18,163 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:34:18,164 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:34:18,164 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:34:18,164 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:34:18,165 - di.container - INFO - 初始化索引服务...
2025-03-14 21:34:18,165 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:34:18,166 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:34:18,167 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:34:18,167 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:34:18,168 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:34:18,168 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:34:18,169 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:34:18,169 - di.container - INFO - 服务初始化完成
2025-03-14 21:34:18,169 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:34:18,170 - app.factory - INFO - 服务初始化完成
2025-03-14 21:34:18,177 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:34:18,178 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:34:18,178 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:34:18,179 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:34:18,199 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:34:18,208 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:34:18,244 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:34:18,245 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:34:18,247 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:34:18,253 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:34:18,253 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:34:18,254 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:34:18,292 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:34:18,292 - di.container - INFO - 初始化提示服务...
2025-03-14 21:34:18,292 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:34:18,292 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:34:18,292 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:34:18,292 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:34:18,292 - di.container - INFO - 初始化索引服务...
2025-03-14 21:34:18,292 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:34:18,292 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:34:18,292 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:34:18,292 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:34:18,292 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:34:18,292 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:34:18,302 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:34:18,302 - di.container - INFO - 服务初始化完成
2025-03-14 21:34:18,302 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:34:18,303 - app.factory - INFO - 服务初始化完成
2025-03-14 21:34:18,310 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:34:18,310 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:34:18,310 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:34:18,311 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:34:18,331 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:34:18,340 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:34:40,556 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:34:40,646 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:34:40,768 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:34:41,015 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:34:41,143 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:34:41,256 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:34:48,327 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:34:48,328 - di.container - INFO - 初始化服务...
2025-03-14 21:34:48,328 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:34:48,449 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:34:48,450 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:34:48,511 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:34:48,511 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:34:48,513 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:34:48,519 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:34:48,519 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:34:48,520 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:34:48,556 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:34:48,556 - di.container - INFO - 初始化提示服务...
2025-03-14 21:34:48,557 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:34:48,557 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:34:48,557 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:34:48,557 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:34:48,559 - di.container - INFO - 初始化索引服务...
2025-03-14 21:34:48,559 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:34:48,559 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:34:48,559 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:34:48,559 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:34:48,559 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:34:48,559 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:34:48,559 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:34:48,559 - di.container - INFO - 服务初始化完成
2025-03-14 21:34:48,559 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:34:48,559 - app.factory - INFO - 服务初始化完成
2025-03-14 21:34:48,559 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:34:48,559 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:34:48,559 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:34:48,559 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:34:48,590 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:34:48,600 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:34:48,641 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:34:48,641 - di.container - INFO - 初始化服务...
2025-03-14 21:34:48,641 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:34:48,692 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:34:48,692 - di.container - INFO - 初始化服务...
2025-03-14 21:34:48,692 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:34:48,776 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:34:48,777 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:34:48,820 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:34:48,821 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:34:48,859 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:34:48,860 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:34:48,863 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:34:48,866 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:34:48,867 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:34:48,867 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:34:48,897 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:34:48,897 - di.container - INFO - 初始化提示服务...
2025-03-14 21:34:48,898 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:34:48,899 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:34:48,899 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:34:48,899 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:34:48,899 - di.container - INFO - 初始化索引服务...
2025-03-14 21:34:48,900 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:34:48,900 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:34:48,901 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:34:48,901 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:34:48,902 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:34:48,902 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:34:48,902 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:34:48,902 - di.container - INFO - 服务初始化完成
2025-03-14 21:34:48,902 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:34:48,902 - app.factory - INFO - 服务初始化完成
2025-03-14 21:34:48,910 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:34:48,911 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:34:48,911 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:34:48,911 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:34:48,914 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:34:48,915 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:34:48,917 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:34:48,921 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:34:48,921 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:34:48,922 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:34:48,933 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:34:48,933 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:34:48,962 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:34:48,962 - di.container - INFO - 初始化提示服务...
2025-03-14 21:34:48,963 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:34:48,963 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:34:48,963 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:34:48,963 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:34:48,963 - di.container - INFO - 初始化索引服务...
2025-03-14 21:34:48,964 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:34:48,964 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:34:48,965 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:34:48,965 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:34:48,966 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:34:48,966 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:34:48,966 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:34:48,966 - di.container - INFO - 服务初始化完成
2025-03-14 21:34:48,966 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:34:48,966 - app.factory - INFO - 服务初始化完成
2025-03-14 21:34:48,971 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:34:48,971 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:34:48,976 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:34:48,976 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:34:48,994 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:34:48,999 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:34:59,852 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:35:00,178 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:35:00,240 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:35:00,333 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:35:00,726 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:35:00,798 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:35:07,760 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:07,760 - di.container - INFO - 初始化服务...
2025-03-14 21:35:07,761 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:07,864 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:07,864 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:07,926 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:07,926 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:07,926 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:07,941 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:07,942 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:07,942 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:07,969 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:35:07,969 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:07,969 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:07,969 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:07,969 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:07,969 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:07,969 - di.container - INFO - 初始化索引服务...
2025-03-14 21:35:07,969 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:07,969 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:07,969 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:07,969 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:07,969 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:07,969 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:07,974 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:07,975 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:07,975 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:07,975 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:07,980 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:07,980 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:07,980 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:07,981 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:07,996 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:35:08,000 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:35:08,537 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:08,538 - di.container - INFO - 初始化服务...
2025-03-14 21:35:08,538 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:08,539 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:08,540 - di.container - INFO - 初始化服务...
2025-03-14 21:35:08,540 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:08,678 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:08,679 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:08,689 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:08,689 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:08,772 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:08,772 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:08,776 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:08,782 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:08,783 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:08,783 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:08,790 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:08,790 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:08,793 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:08,798 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:08,798 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:08,799 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:08,832 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:35:08,833 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:08,833 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:08,833 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:08,834 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:08,834 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:08,834 - di.container - INFO - 初始化索引服务...
2025-03-14 21:35:08,835 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:08,835 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:08,836 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:08,837 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:08,837 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:08,837 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:08,838 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:08,838 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:08,838 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:08,839 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:08,847 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:08,847 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:08,847 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:08,848 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:08,848 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:08,848 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:08,849 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:08,849 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:08,849 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:08,849 - di.container - INFO - 初始化索引服务...
2025-03-14 21:35:08,850 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:08,850 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:08,851 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:08,852 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:08,852 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:08,852 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:08,852 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:08,852 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:08,853 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:08,853 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:08,860 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:08,860 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:08,860 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:08,860 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:08,865 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:35:08,869 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:35:08,882 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:35:08,892 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:35:16,058 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:35:16,122 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:35:16,210 - werkzeug - INFO -  * Detected change in 'C:\\workspace\\project\\smartdoc-pioneer\\app\\services\\llm_service.py', reloading
2025-03-14 21:35:16,618 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:35:16,702 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:35:16,741 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:35:18,752 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:18,752 - di.container - INFO - 初始化服务...
2025-03-14 21:35:18,753 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:18,926 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:18,927 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:19,015 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:19,016 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:19,019 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:19,020 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:19,026 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:19,026 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:19,071 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:35:19,072 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:19,072 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:19,072 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:19,073 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:19,073 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:19,073 - di.container - INFO - 初始化索引服务...
2025-03-14 21:35:19,074 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:19,074 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:19,076 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:19,076 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:19,076 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:19,077 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:19,077 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:19,077 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:19,078 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:19,078 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:19,083 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:19,083 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:19,083 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:19,083 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:19,121 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 21:35:19,122 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 21:35:19,126 - werkzeug - INFO -  * Restarting with stat
2025-03-14 21:35:24,211 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:24,212 - di.container - INFO - 初始化服务...
2025-03-14 21:35:24,212 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:24,273 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:24,274 - di.container - INFO - 初始化服务...
2025-03-14 21:35:24,274 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:24,343 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:24,344 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:24,413 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:24,414 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:24,424 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:24,425 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:24,425 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:24,425 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:24,425 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:24,425 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:24,425 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:24,425 - di.container - INFO - 初始化服务...
2025-03-14 21:35:24,425 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:24,473 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:24,473 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:35:24,473 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:24,474 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:24,474 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:24,474 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:24,476 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:24,476 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:24,476 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:24,477 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:24,477 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:24,479 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:24,479 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:24,480 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:24,480 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:24,480 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:24,481 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:24,481 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:24,481 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:24,481 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:24,481 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:24,481 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:24,489 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:24,489 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:24,489 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:24,489 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:24,512 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:35:24,518 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:35:24,518 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:24,519 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:24,519 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:24,519 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:24,519 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:24,519 - di.container - INFO - 初始化索引服务...
2025-03-14 21:35:24,520 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:24,520 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:24,521 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:24,522 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:24,521 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:35:24,522 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:24,522 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:24,522 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:24,523 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:24,523 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:24,523 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:24,528 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:24,528 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:24,529 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:24,529 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:24,543 - services.llm - INFO - 聊天生成: messages=2, temperature=0.7, max_tokens=1024
2025-03-14 21:35:24,543 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:35:24,543 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:35:24,543 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:24,543 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:24,627 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:24,628 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:24,631 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:24,636 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:24,637 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:24,637 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:24,678 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:35:24,678 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:24,679 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:24,679 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:24,679 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:24,680 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:24,680 - di.container - INFO - 初始化索引服务...
2025-03-14 21:35:24,680 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:24,681 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:24,682 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:24,682 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:24,682 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:24,683 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:24,683 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:24,683 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:24,683 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:24,683 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:24,688 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:24,689 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:24,689 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:24,689 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:24,705 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:35:24,710 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 21:35:26,223 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 401 Unauthorized"
2025-03-14 21:35:26,229 - services.llm - WARNING - LLM API调用失败: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-dummy-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}，使用虚拟响应
2025-03-14 21:35:26,230 - services.chat - INFO - 生成聊天回复成功
2025-03-14 21:35:26,232 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 21:35:26] "POST /api/chat/completions HTTP/1.1" 200 -
2025-03-14 21:35:26,512 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 21:35:26,512 - di.container - INFO - 初始化服务...
2025-03-14 21:35:26,512 - di.container - INFO - 初始化LLM服务...
2025-03-14 21:35:26,640 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 21:35:26,640 - di.container - INFO - 初始化嵌入服务...
2025-03-14 21:35:26,718 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 21:35:26,718 - di.container - INFO - 初始化向量存储服务...
2025-03-14 21:35:26,720 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 21:35:26,723 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 21:35:26,724 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 21:35:26,724 - di.container - INFO - 初始化文档加载服务...
2025-03-14 21:35:26,760 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 21:35:26,760 - di.container - INFO - 初始化提示服务...
2025-03-14 21:35:26,760 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 21:35:26,761 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 21:35:26,761 - di.container - INFO - 初始化搜索服务...
2025-03-14 21:35:26,761 - di.container - INFO - 搜索服务初始化完成
2025-03-14 21:35:26,761 - di.container - INFO - 初始化索引服务...
2025-03-14 21:35:26,762 - di.container - INFO - 索引服务初始化完成
2025-03-14 21:35:26,762 - di.container - INFO - 初始化RAG服务...
2025-03-14 21:35:26,763 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 21:35:26,764 - di.container - INFO - RAG服务初始化完成
2025-03-14 21:35:26,764 - di.container - INFO - 初始化聊天服务...
2025-03-14 21:35:26,764 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 21:35:26,764 - di.container - INFO - 聊天服务初始化完成
2025-03-14 21:35:26,764 - di.container - INFO - 服务初始化完成
2025-03-14 21:35:26,764 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 21:35:26,765 - app.factory - INFO - 服务初始化完成
2025-03-14 21:35:26,770 - app.factory - INFO - 蓝图注册完成
2025-03-14 21:35:26,771 - app.factory - INFO - 错误处理器注册完成
2025-03-14 21:35:26,771 - app.factory - INFO - 应用程序初始化完成
2025-03-14 21:35:26,771 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 21:35:26,788 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 21:35:26,794 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 22:32:48,610 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 22:32:48,610 - di.container - INFO - 初始化服务...
2025-03-14 22:32:48,610 - di.container - INFO - 初始化LLM服务...
2025-03-14 22:32:48,712 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 22:32:48,713 - di.container - INFO - 初始化嵌入服务...
2025-03-14 22:32:48,776 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 22:32:48,777 - di.container - INFO - 初始化向量存储服务...
2025-03-14 22:32:48,779 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 22:32:48,785 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 22:32:48,786 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 22:32:48,786 - di.container - INFO - 初始化文档加载服务...
2025-03-14 22:32:48,817 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 22:32:48,817 - di.container - INFO - 初始化提示服务...
2025-03-14 22:32:48,818 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 22:32:48,818 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 22:32:48,818 - di.container - INFO - 初始化搜索服务...
2025-03-14 22:32:48,818 - di.container - INFO - 搜索服务初始化完成
2025-03-14 22:32:48,818 - di.container - INFO - 初始化索引服务...
2025-03-14 22:32:48,819 - di.container - INFO - 索引服务初始化完成
2025-03-14 22:32:48,819 - di.container - INFO - 初始化RAG服务...
2025-03-14 22:32:48,820 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 22:32:48,820 - di.container - INFO - RAG服务初始化完成
2025-03-14 22:32:48,820 - di.container - INFO - 初始化聊天服务...
2025-03-14 22:32:48,820 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 22:32:48,821 - di.container - INFO - 聊天服务初始化完成
2025-03-14 22:32:48,821 - di.container - INFO - 服务初始化完成
2025-03-14 22:32:48,821 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 22:32:48,821 - app.factory - INFO - 服务初始化完成
2025-03-14 22:32:48,827 - app.factory - INFO - 蓝图注册完成
2025-03-14 22:32:48,827 - app.factory - INFO - 错误处理器注册完成
2025-03-14 22:32:48,828 - app.factory - INFO - 应用程序初始化完成
2025-03-14 22:32:48,828 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 22:32:48,857 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.95:5000
2025-03-14 22:32:48,858 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-14 22:32:48,861 - werkzeug - INFO -  * Restarting with stat
2025-03-14 22:32:55,466 - root - INFO - 日志系统已设置，级别: INFO, 文件: app.log
2025-03-14 22:32:55,466 - di.container - INFO - 初始化服务...
2025-03-14 22:32:55,466 - di.container - INFO - 初始化LLM服务...
2025-03-14 22:32:55,567 - di.container - INFO - LLM服务初始化完成，使用模型: gpt-3.5-turbo
2025-03-14 22:32:55,568 - di.container - INFO - 初始化嵌入服务...
2025-03-14 22:32:55,632 - di.container - INFO - 嵌入服务初始化完成，使用模型: text-embedding-3-small
2025-03-14 22:32:55,633 - di.container - INFO - 初始化向量存储服务...
2025-03-14 22:32:55,634 - di.container - WARNING - Chroma不可用，尝试使用FAISS作为替代
2025-03-14 22:32:55,638 - di.container - WARNING - 向量存储服务初始化失败: FAISS.__init__() got an unexpected keyword argument 'index_name'，使用内存向量存储
2025-03-14 22:32:55,639 - di.container - INFO - 向量存储服务初始化完成，使用虚拟向量存储
2025-03-14 22:32:55,639 - di.container - INFO - 初始化文档加载服务...
2025-03-14 22:32:55,679 - di.container - INFO - 文档加载服务初始化完成
2025-03-14 22:32:55,679 - di.container - INFO - 初始化提示服务...
2025-03-14 22:32:55,679 - services.prompt - WARNING - 提示模板目录不存在: prompts
2025-03-14 22:32:55,680 - di.container - INFO - 提示服务初始化完成，使用模板目录: prompts
2025-03-14 22:32:55,680 - di.container - INFO - 初始化搜索服务...
2025-03-14 22:32:55,680 - di.container - INFO - 搜索服务初始化完成
2025-03-14 22:32:55,680 - di.container - INFO - 初始化索引服务...
2025-03-14 22:32:55,681 - di.container - INFO - 索引服务初始化完成
2025-03-14 22:32:55,681 - di.container - INFO - 初始化RAG服务...
2025-03-14 22:32:55,683 - services.rag_service - INFO - RAG 服务初始化完成
2025-03-14 22:32:55,683 - di.container - INFO - RAG服务初始化完成
2025-03-14 22:32:55,683 - di.container - INFO - 初始化聊天服务...
2025-03-14 22:32:55,683 - services.chat - INFO - 聊天服务初始化完成
2025-03-14 22:32:55,684 - di.container - INFO - 聊天服务初始化完成
2025-03-14 22:32:55,684 - di.container - INFO - 服务初始化完成
2025-03-14 22:32:55,684 - app.factory - INFO - 应用程序配置完成，环境: development
2025-03-14 22:32:55,684 - app.factory - INFO - 服务初始化完成
2025-03-14 22:32:55,690 - app.factory - INFO - 蓝图注册完成
2025-03-14 22:32:55,691 - app.factory - INFO - 错误处理器注册完成
2025-03-14 22:32:55,691 - app.factory - INFO - 应用程序初始化完成
2025-03-14 22:32:55,691 - run - INFO - 启动应用程序，主机: 0.0.0.0, 端口: 5000, 调试模式: True
2025-03-14 22:32:55,710 - werkzeug - WARNING -  * Debugger is active!
2025-03-14 22:32:55,717 - werkzeug - INFO -  * Debugger PIN: 251-648-134
2025-03-14 22:32:58,237 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 22:32:58] "[33mGET /api/docs/swagger HTTP/1.1[0m" 404 -
2025-03-14 22:33:00,827 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 22:33:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-03-14 22:33:07,437 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 22:33:07] "[33mGET /api/docs/swagger HTTP/1.1[0m" 404 -
2025-03-14 22:35:22,676 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 22:35:22] "[33mGET /api/docs/swagger.json HTTP/1.1[0m" 404 -
2025-03-14 22:35:37,472 - werkzeug - INFO - 127.0.0.1 - - [14/Mar/2025 22:35:37] "[33mGET /api/docs HTTP/1.1[0m" 404 -
